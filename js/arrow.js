const x=new Map,b=new Set,R=new Set;let $=!1;const A=new WeakMap;function F(t){return(o,n)=>{b.size||setTimeout(()=>{$=!0,b.forEach(e=>e(o,n)),b.clear(),$=!1,R.forEach(e=>e()),R.clear()}),!$&&b.add(t)}}function W(t){if(!b.size)return t&&t(),Promise.resolve();let o;const n=new Promise(e=>{o=e});return R.add(()=>{t&&t(),o()}),n}function I(t,o){x.forEach(n=>{let e=n.get(t);e||(e=new Set,n.set(t,e)),e.add(o)})}function H(t){return typeof t=="function"&&!!t.isT}function M(t){return typeof t=="object"&&t!==null&&typeof t.$on=="function"}function j(t,o){return Object.prototype.hasOwnProperty.call(t,o)}function V(t){return j(t,"$on")}function P(t){const o=document.createElement("template");o.innerHTML=t;const n=o.content.cloneNode(!0);return n.normalize(),n.childNodes}function C(t=Symbol()){let o="",n=[],e=[],f=[];const d=new Map,c=()=>{e.length||l();const i=E(L(P(o),n)());return a(),i};c.ch=()=>f,c.l=0,c.add=i=>{if(!i&&i!==0)return;let m,u=i,r=[];var p;H(i)?[u,r,m]=i._h():u=(p=String(i))==="<!---->"?p:p.replace(/[<>]/g,y=>y===">"?"&gt;":"&lt;"),o+=u,o+="<!--\u274D\u21DA-->";const s=m&&d.get(m),g=s||{html:u,exp:r,dom:[],tpl:i,key:m};e.push(g),m&&(s?s.exp.forEach((y,_)=>y._up(r[_].e)):d.set(m,g)),r.forEach(y=>n.push(y)),c.l++},c._up=()=>{const i=C(t);let m=0,u=f[0].dom[0];e.length||l(document.createComment(""));const r=()=>{if(!i.l)return;const s=i(),g=s.lastChild;u[m?"after":"before"](s),h(i,e,m),u=g};e.forEach((s,g)=>{const y=f[g];s.key&&s.dom.length?(r(),y&&y.dom===s.dom||u[g?"after":"before"](...s.dom),u=s.dom[s.dom.length-1]):y&&s.html===y.html&&!y.key?(r(),y.exp.forEach((_,w)=>_._up(s.exp[w].e)),s.exp=y.exp,s.dom=y.dom,u=s.dom[s.dom.length-1]):(i.l||(m=g),i.add(s.tpl))}),r();let p=u.nextSibling;for(;p&&j(p,t);){const s=p.nextSibling;B(p),p=s}a()};const a=()=>{o="",c.l=0,n=[],f=[...e],e=[]},l=i=>{o="<!---->",e.push({html:o,exp:[],dom:i?[i]:[],tpl:o,key:0})},E=i=>{let m=0;const u=[];return i.childNodes.forEach(r=>{if(r.nodeType===8&&r.data==="\u274D\u21DA")return m++,void u.push(r);Object.defineProperty(r,t,{value:t}),e[m].dom.push(r)}),u.forEach(r=>r.remove()),i},h=(i,m,u)=>{i.ch().forEach((r,p)=>{m[u+p].dom=r.dom})};return c}function z(t,...o){const n=[];let e="";const f=(a,l)=>{if(typeof a=="function"){let E=()=>{};return n.push(Object.assign((...h)=>a(...h),{e:a,$on:h=>{E=h},_up:h=>{a=h,E()}})),l+"<!--\u27B3\u274D-->"}return Array.isArray(a)?a.reduce((E,h)=>f(h,E),l):l+a},d=()=>(e||(e=t.reduce(function(a,l,E){return a+=l,o[E]!==void 0?f(o[E],a):a},"")),e),c=a=>{const l=L(P(d()),n);return a?l(a):l()};return c.isT=!0,c._k=0,c._h=()=>[d(),n,c._k],c.key=a=>(c._k=a,c),c}function L(t,o){const n=document.createDocumentFragment();let e;for(;e=t.item(0);)e.nodeType!==8||e.nodeValue!=="\u27B3\u274D"?(e instanceof Element&&q(e,o),e.hasChildNodes()&&L(e.childNodes,o)(e),n.append(e),e instanceof HTMLOptionElement&&(e.selected=e.defaultSelected)):n.append(G(e,o));return f=>f?(f.appendChild(n),f):n}function q(t,o){if(!t.hasAttributes())return;const n=t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement,e=t.attributes.length,f=[],d=[];for(let c=0;c<e;c++)d.push(t.attributes[c]);d.forEach(c=>{var a;const l=c.name;if(c.value.indexOf("<!--\u27B3\u274D-->")!==-1){const E=o.shift();if(l.charAt(0)==="@"){const h=l.substring(1);t.addEventListener(h,E),A.has(t)||A.set(t,new Map),(a=A.get(t))===null||a===void 0||a.set(h,E),f.push(l)}else S(E,h=>{n&&l==="value"?t.value=h:h!==!1?t.setAttribute(l,h):t.removeAttribute(l)})}}),f.forEach(c=>t.removeAttribute(c))}function B(t){var o;t.remove(),(o=A.get(t))===null||o===void 0||o.forEach((n,e)=>t.removeEventListener(e,n))}function G(t,o){const n=document.createDocumentFragment();t.remove();const e=C(),f=o.shift();if(f&&H(f.e))e.add(f.e);else{e.l&&n.appendChild(e());let d=document.createTextNode("");d=S(f,c=>D(d,c)),n.appendChild(d instanceof Node?d:d())}return e.l&&n.appendChild(e()),n}function D(t,o){if(!Array.isArray(o))return D(t,[o]);const n=typeof t=="function",e=n?t:C();return o.forEach(f=>e.add(f)),n&&e._up(),e}function S(t,o){const n=Symbol();x.has(n)||x.set(n,new Map);let e=new Map;const f=F(d);function d(){x.set(n,new Map);const c=t(),a=x.get(n);return x.delete(n),e.forEach((l,E)=>{const h=a.get(E);h&&h.forEach(i=>l.delete(i)),l.forEach(i=>E.$off(i,f))}),a.forEach((l,E)=>{l.forEach(h=>E.$on(h,f))}),e=a,o?o(c):c}return V(t)&&t.$on(d),d()}function J(t,o){const n=o._st();return n.o&&n.o.forEach((e,f)=>{e.forEach(d=>{t.$on(f,d)})}),n.p&&(t._p=n.p),t}function K(t,o,n,e){const f=(...d)=>{const c=Array.prototype[t].call(o,...d);if(o.forEach((a,l)=>n._em(String(l),a)),n._p){const[a,l]=n._p;l._em(a,n)}return c};switch(t){case"shift":case"pop":case"sort":case"reverse":case"copyWithin":return f;case"unshift":case"push":case"fill":return(...d)=>f(...d.map(c=>v(c)));case"splice":return(d,c,...a)=>f(d,c,...a.map(l=>v(l)));default:return e}}function v(t,o={}){if(M(t)||typeof t!="object")return t;const n=o.o||new Map,e=o.op||new Map,f=Array.isArray(t),d=[],c=f?[]:Object.create(t,{});for(const u in t){const r=t[u];typeof r=="object"&&r!==null?(c[u]=M(r)?r:v(r),d.push(u)):c[u]=r}const a=u=>(r,p)=>{let s=n.get(r),g=e.get(p);s||(s=new Set,n.set(r,s)),g||(g=new Set,e.set(p,g)),s[u](p),g[u](r)},l=a("add"),E=a("delete"),h=(u,r,p)=>{n.has(u)&&n.get(u).forEach(s=>s(r,p))},i={$on:l,$off:E,_em:h,_st:()=>({o:n,op:e,r:c,p:m._p}),_p:void 0},m=new Proxy(c,{get(...u){const[,r]=u;if(Reflect.has(i,r))return Reflect.get(i,r);const p=Reflect.get(...u);return I(m,r),f&&j(Array.prototype,r)?K(r,c,m,p):p},set(...u){const[r,p,s]=u,g=Reflect.get(r,p);if(Reflect.has(i,p))return Reflect.set(i,p,s);if(s&&M(g)){const _=g,w=_._st(),T=M(s)?J(s,_):v(s,w);return Reflect.set(r,p,T),h(p,T),w.o.forEach((Y,k)=>{const N=Reflect.get(g,k),O=Reflect.get(T,k);N!==O&&_._em(k,O,N)}),!0}const y=Reflect.set(...u);return y&&(g!==s&&h(p,s,g),m._p&&m._p[1]._em(...m._p)),y}});return d.map(u=>{m[u]._p=[u,m]}),m}const Q=z,U=v,X=S;export{Q as html,W as nextTick,v as r,U as reactive,z as t,S as w,X as watch};export default null;